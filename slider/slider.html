<!DOCTYPE html>
<html lang="ru">
<head>
	<meta charset="UTF-8">
	<title>Slider</title>
	<script src="jquery-3.3.1.min.js"></script>
</head>
<style>
	.slider {
		position: relative;
	 	max-width: 700px;
	 	margin: 0 auto;
	 	overflow: hidden;
	}
	.slider__slides {
		position: relative;
		display: flex;
		left:0;
	}
	.slider__slides_animated {
		transition: .6s;
	}
	.slider__item {
		position: relative;
		flex:0 0 100%;
		color:#fff;
		font-size: 60px;
		left: 0;
		padding-bottom: 30%;
	}

	.red {
		background: red;
	}
	.blue {
		background: blue;
	}
	.green{
		background: green;
	}

	.slider__nav {
		position: absolute;
		display: flex;
		justify-content: center;
		bottom: 10%;
		left:30%;
	}
	.slider__link {
		width: 10px;
		height: 10px;
		background: #fff;
		border-radius: 50%;
		border:solid 2px;
	}
	.slider__link_active {
		background: #000;
	}
</style>
<body>
	<div class="slider">
		<div class="slider__slides slider__slides_animated">
			<div class="slider__item red">1</div>
			<div class="slider__item blue">2</div>
			<div class="slider__item green">3</div>
			<div class="slider__item green">4</div>
			<div class="slider__item green">5</div>
			<div class="slider__item green">6</div>
			<div class="slider__item green">7</div>
			<div class="slider__item green">8</div>
			<div class="slider__item green">9</div>
			<div class="slider__item green">10</div>
			<div class="slider__item green">11</div>
			<div class="slider__item green">12</div>
			<div class="slider__item green">13</div>
			<div class="slider__item green">14</div>
			<div class="slider__item green">15</div>
			<div class="slider__item green">16</div>
		</div>
		<div class="slider__nav"></div>
		<button class="prev">Назад</button>
		<button class="next">Вперед</button>
	</div>
	<script>
		$(function () {
			var slider = $(".slider__slides");
			var slide = $(".slider__item");
			var prevBtn = $(".prev");
			var nextBtn = $(".next");
			var slidesArr = [];
			var triggerSlide = 0;
			var rangeIndex = 0;
			var autoPlay;
			var timer;
			var currentSlide = 0;
			var enubled = true;

			function changeSliderLink() {

				if(currentSlide > slide.length-1){
					currentSlide = 0;
					$(".slider__link").eq(slide.length-1).removeClass("slider__link_active");
				}
				if(currentSlide<0){
					currentSlide = slide.length-1;
					$(".slider__link").eq(0).removeClass("slider__link_active");
				}
				$(".slider__link").eq(currentSlide).toggleClass("slider__link_active");
				$(".slider__link").eq(currentSlide-1).removeClass("slider__link_active");
				$(".slider__link").eq(currentSlide+1).removeClass("slider__link_active");

			}

			for(var i = 0; i < slide.length; i++){
				slidesArr[i]={
					elem:slide.eq(i),
					left:0,
					index:i
				};
				$("<div>", {class: "slider__link"})
						.appendTo(".slider__nav")
						.attr("data-number",i)
						.click(function () {
							var current = $(this).data("number");
							findSlide(current);
						});

			}

			$(".slider__link").eq(0).toggleClass("slider__link_active");

			function findSlide(a){
				for(var t = 0;t<slidesArr.length;t++){
					if(slidesArr[triggerSlide].index!==a) MoveNext();
					else break;
				}

			}

			$(window).resize(function () {
				slider.removeClass("slider__slides_animated");
				refreshLeft();
				slider.css("left",rangeIndex * slider.width());
				setTimeout(function () {
					slider.addClass("slider__slides_animated");
				},10)
			});

			function refreshLeft() {

					for(var z=0;z<slidesArr.length;z++){
						var refPos = slider.width() * slidesArr.length * slidesArr[z].left;
						slidesArr[z].elem.css("left",refPos);
					}
			}

			function MoveSlide(dir){

				if(dir=="next"){
					var left = rangeIndex * slide.width() - slide.width();
					slider.css("left",left);
					rangeIndex--;
					currentSlide++;

				}
				if(dir=="prev"){

					var left = rangeIndex * slide.width() + slide.width();
					slider.css("left",left);
					rangeIndex++;
					currentSlide--;
				}
				changeSliderLink();
			}

			function MoveLeftReverse(){
				AddSlideLeft();
				MoveSlide("prev");
			}

			function MoveRightReverse(){
				AddSlideRight();
				MoveSlide("next");
			}

			function AddSlideLeft(){
				//На сколько нужно сместить последний слайд для перестановки
					if(slidesArr[slidesArr.length - 1].left <= 0) {
						var left = slidesArr[slidesArr.length - 1].left * slide.width() * slide.length;
						var pos = -slide.width() * slide.length + left;
					}

					if(slidesArr[slidesArr.length - 1].left > 0) {
						var left = slidesArr[slidesArr.length - 1].left * slide.width() * slide.length;
						var pos = left - slide.width() * slide.length;
					}

				//Переместить последний вначало
				slidesArr[slidesArr.length - 1].elem.css("left",pos);

				//Сохранить текущую позицию
				if(slidesArr[slidesArr.length - 1].left <= 0){
					slidesArr[slidesArr.length - 1].left--;
				}
				if(slidesArr[slidesArr.length - 1].left > 0) {
					slidesArr[slidesArr.length - 1].left--;
				}

				//Удалить последний элемент в массиве и добавить его вначало	
				var temp = slidesArr.pop();
				slidesArr.unshift(temp);
			}
			
			function AddSlideRight(){
				//На сколько нужно сместить первый слайд для перестановки
					var left = slidesArr[0].left * slide.width() * slide.length;
					var pos = left + slide.width() * slide.length;
					
				//Переместить первый слайд в конец
				slidesArr[0].elem.css("left",pos);

				//Сохранить текущую позицию
				slidesArr[0].left++;

				//Удалить последний элемент в массиве и добавить его вначало	
				var temp = slidesArr.shift();
				slidesArr.push(temp);
			}

			function stopAutoPlay(){
				clearInterval(autoPlay);
				clearTimeout(timer);
				timer = setTimeout(startAutoPlay,5000);
			}

			prevBtn.click(function() {
				stopAutoPlay();
				if(triggerSlide>0){
					triggerSlide--;
					MoveSlide("prev");
				} else {
					MoveLeftReverse();
				}

			});

			function MoveNext() {
				if(triggerSlide<slidesArr.length-1){
					triggerSlide++;
					MoveSlide("next");
				} else {
					MoveRightReverse();
				}

			}

			nextBtn.click(function() {
				stopAutoPlay();
				MoveNext();
			});

			function startAutoPlay() {
				autoPlay = setInterval(MoveNext,1000);
			}
			
			var _handleVisibilityChange = function () {
              if (document.visibilityState === "hidden") {
               clearInterval(autoPlay);
              } else {
               startAutoPlay();
              }
            }
            document.addEventListener('visibilitychange', _handleVisibilityChange, false);

            
            $(document).on('scroll', function() {
                height = slider.offset().top + slider.height();
                if($(window).scrollTop()>height) {
                    clearInterval(autoPlay);
                    enubled = true;
                }
                else if($(window).scrollTop()<height) {
                    if(enubled) startAutoPlay();
                    enubled = false;
                }
            });

		});
	</script>
</body>
</html>