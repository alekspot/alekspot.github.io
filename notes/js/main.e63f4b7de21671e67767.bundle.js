(self.webpackChunknotes_pure_js=self.webpackChunknotes_pure_js||[]).push([[179],{346:(t,e,n)=>{"use strict";var r=n(379),s=n.n(r),o=n(217);s()(o.Z,{insert:"head",singleton:!1}),o.Z.locals;class a{constructor(t){this.$el="string"==typeof t?document.querySelector(t):t}html(t){return"string"==typeof t?(this.$el.innerHTML=t,this):this.$el.outerHTML.trim()}text(t){return void 0!==t?(this.$el.textContent=t,this):"input"===this.$el.tagName.toLowerCase()?this.$el.value.trim():this.$el.textContent.trim()}clear(){return this.html(""),this}on(t,e){this.$el.addEventListener(t,e)}off(t,e){this.$el.removeEventListener(t,e)}append(t){return t instanceof a&&(t=t.$el),Element.prototype.append?this.$el.append(t):this.$el.appendChild(t),this}closest(t){return i(this.$el.closest(t))}getCoords(){return this.$el.getBoundingClientRect()}get data(){return this.$el.dataset}find(t){return i(this.$el.querySelector(t))}findAll(t){return Array.from(this.$el.querySelectorAll(t)).map(i)}css(t={}){for(const e in t)({}).hasOwnProperty.call(t,e)&&(this.$el.style[e]=t[e])}getStyles(t=[]){return t.reduce(((t,e)=>(t[e]=this.$el.style[e],t)),{})}addClass(t){return this.$el.classList.add(t),this}removeClass(t){return this.$el.classList.remove(t),this}focus(){return this.$el.focus(),this}attr(t,e){return e?(this.$el.setAttribute(t,e),this):this.$el.getAttribute(t)}}function i(t){return new a(t)}function c(t,e=1,n=10,r=4){const s=Math.ceil(t/n);let o,a;if(e<1?e=1:e>s&&(e=s),s<=r)o=1,a=s;else{const t=Math.floor(r/2),n=Math.ceil(r/2)-1;e<=t?(o=1,a=r):e+n>=s?(o=s-r+1,a=s):(o=e-t,a=e+n)}const i=(e-1)*n,c=Math.min(i+n-1,t-1),l=Array.from(Array(a+1-o).keys()).map((t=>o+t));return{totalItems:t,currentPage:e,pageSize:n,totalPages:s,startPage:o,endPage:a,startIndex:i,endIndex:c,pages:l}}i.create=(t,e="")=>{const n=document.createElement(t);return e&&n.classList.add(e),i(n)};const l=(t,e,n)=>{const r=t.filter((t=>t.month===e)),s=c(r.length,n),{startIndex:o,endIndex:a}=s,i=r.filter(((t,e)=>e>=o&&e<=a));return{recordsByMonth:r,recordsOnPage:i,pagination:s}},d=(t,e)=>{const n=c(t.length,e),{startIndex:r,endIndex:s}=n;return{recordsOnPage:t.filter(((t,e)=>e>=r&&e<=s)),pagination:n}};function u(t,e=null){if(!e)return JSON.parse(localStorage.getItem(t));localStorage.setItem(t,JSON.stringify(e))}class h{constructor(t){this.store=t,this.sub=null,this.prevState={}}subscribeComponents(t){this.prevState=this.store.getState(),this.sub=this.store.subscribe((e=>{Object.keys(e).forEach((n=>{var r,s;r=this.prevState[n],s=e[n],("object"==typeof r&&"object"==typeof s?JSON.stringify(r)===JSON.stringify(s):r===s)||t.forEach((t=>{if(t.isWatching(n)){const r={[n]:e[n]};t.storeChanged(r)}}))})),this.prevState=this.store.getState()}))}unSubscribeFromStore(){this.sub.unsubscribe()}}const p=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function f(t){return"on"+("string"!=typeof(e=t)?"":e.charAt(0).toUpperCase()+e.slice(1));var e}class m extends class{constructor(t,e=[]){if(!t)throw new Error("Root element not provided");this.$root=t,this.listeners=e}initDomListeners(){this.listeners.forEach((t=>{const e=f(t);if(!this[e])throw new Error(`Method ${e} is not implemented in ${this.name} component`);this[e]=this[e].bind(this),this.$root.on(t,this[e])}))}removeDomListeners(){this.listeners.forEach((t=>{const e=f(t);this.$root.off(t,this[e])}))}}{constructor(t,e={}){super(t,e.listeners),this.name=e.name||"",this.store=e.store,this.subscribe=e.subscribe||[],this.prepare()}prepare(){}toHTML(){return""}init(){this.initDomListeners()}destroy(){this.removeDomListeners()}$dispatch(t){this.store.dispatch(t)}storeChanged(t){console.log("changes",t)}isWatching(t){return this.subscribe.includes(t)}}const b="SELECT_MONTH",g="SELECT_RECORD",v="ADD_RECORD",y="SHOW_MODAL",$="HIDE_MODAL",S="REMOVE_RECORD",C=t=>({type:g,id:Number.parseInt(t)});class w extends m{constructor(t,e){super(t,{name:"Navigation",listeners:["click"],...e})}toHTML(){return t=this.store.getState().month,p.map(((e,n)=>((t,e,n=0)=>`\n    <div class="nav-item${n===e?" nav-item--selected":""}" data-id="${e}" data-type="btn">\n        ${t}\n    </div>`)(e,n,t))).join("");var t}onClick(t){const e=i(t.target);var n;"btn"===e.data.type&&(this.$root.findAll('[data-type="btn"]').forEach((t=>t.removeClass("nav-item--selected"))),this.$dispatch((n=e.data.id,{type:b,month:Number.parseInt(n)})),e.addClass("nav-item--selected"))}}var M,E;(E="className")in(M=w)?Object.defineProperty(M,E,{value:"nav",enumerable:!0,configurable:!0,writable:!0}):M[E]="nav";const x=(new Date).getMonth(),L={month:x,records:[],...l([],x,1),selectedRecord:null,showModal:!1},_=`<tr>${["Date & Time","Title","Note"].map(((t,e)=>`<td ${0===e?'class="col-1"':""}class="">${t}</td>`)).join("")}</tr>`;class O extends m{constructor(t,e){super(t,{name:"Table",listeners:["click"],subscribe:["selectedRecord","recordsOnPage"],...e})}toHTML(){return(({recordsOnPage:t,selectedRecord:e})=>`\n        <table class="table">\n           ${_}\n           ${t.map((t=>((t,e)=>`\n    <tr class="table__record${e===t.id?" table__record--selected":""}" data-type="record" data-id="${t.id}">\n        <td class="col-1">${t.time}</td>\n        <td>${t.title}</td>\n        <td>${t.text}</td>\n    </tr>\n`)(t,e))).join("")}\n        </table>\n    `)(this.store.getState())}onClick(t){const e=i(t.target),n='[data-type="record"]';if(e.closest(n).$el){const t=e.closest(n);this.$root.findAll(n).forEach((t=>t.removeClass("table__record--selected")));const r=t.data.id;this.$dispatch(C(r)),document.onclick=t=>{!i(t.target).closest(n).$el&&(this.$dispatch(C(null)),document.onclick=null)},t.addClass("table__record--selected")}}storeChanged(t){this.$root.html(this.toHTML())}}!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(O,"className","records");class R extends m{constructor(t,e){super(t,{name:"Pagination",listeners:["click"],subscribe:["pagination"],...e})}toHTML(){return(({pagination:t})=>{const{currentPage:e,startPage:n,endPage:r,totalPages:s}=t,o=1!==n,a=r!==s;return[{text:"<<",page:e-t.pages.length,display:o},{text:"<",page:e-1,display:o},...t.pages.map((t=>({text:t,page:t,display:!0}))),{text:">",page:e+1,display:a},{text:">>",page:e+t.pages.length,display:a}].filter((t=>t.display)).map((({page:t,text:n})=>{return`<span class="${r="pagination__item",s=e===t,`${r}${s?" "+r+"--selected":""}`}" data-page="${t}">${n}</span>`;var r,s})).join("")})(this.store.getState())}onClick(t){const e=i(t.target);e.data.page&&this.$dispatch({type:"SELECT_PAGE",page:Number(e.data.page)})}storeChanged(t){this.$root.html(this.toHTML())}}!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(R,"className","pagination");const T=t=>`\n\n    \n    <h5>Note list:</h5>\n    <div class="actions">\n        ${(t=>[{action:"show_modal",text:"ADD",isDisabled:t.showModal},{action:"delete",text:"DELETE",isDisabled:t.showModal||!t.selectedRecord}].map((t=>`<button class="btn" data-type="action" data-action="${t.action}" ${t.isDisabled?"disabled":""}>${t.text}</button>`)).join(""))(t)}\n    </div>\n   \n    ${t.showModal?'<div class="modal">\n        <h4>Add note</h4>\n        <div>Title:</div>\n        <input data-input="title" type="text">\n        <div>Note:</div>\n        <input data-input="text" type="text">\n        <div class="modal__footer">\n            <button class="btn modal__btn" data-type="action" data-action="add">ADD</button>\n            <button class="btn modal__btn" data-type="action" data-action="close">CLOSE</button>\n        </div>\n    </div>\n    ':""}\n`;class A extends m{constructor(t,e){super(t,{name:"Modal",listeners:["click"],subscribe:["showModal","selectedRecord"],...e})}toHTML(){return T(this.store.getState())}onClick(t){const e=i(t.target);if("action"===e.data.type)switch(e.data.action){case"show_modal":return void this.$dispatch({type:y});case"close":return void this.$dispatch({type:$});case"add":{const t=this.$root.find('[data-input="title"]').$el.value,e=this.$root.find('[data-input="text"]').$el.value,n=new Date,r={id:n.getTime(),month:n.getMonth(),time:n.toLocaleDateString()+" "+n.toLocaleTimeString(),title:t,text:e};return void this.$dispatch((t=>({type:v,record:t}))(r))}case"delete":return void this.$dispatch({type:S})}}storeChanged(){this.$root.html(T(this.store.getState()))}}!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(A,"className","records-header");const N=u("appRecords")||[],j=(new Date).getMonth(),D=function(t,e={}){let n=t({...e},{type:"__INIT__"}),r=[];return{subscribe:t=>(r.push(t),{unsubscribe(){r=r.filter((e=>e!==t))}}),dispatch(e){n=t(n,e),r.forEach((t=>t(n)))},getState:()=>JSON.parse(JSON.stringify(n))}}((function(t=L,e){switch(e.type){case b:return{...t,month:e.month,selectedRecord:null,...l(t.records,e.month,1)};case g:return{...t,selectedRecord:e.id};case"SELECT_PAGE":return{...t,selectedRecord:null,...d(t.recordsByMonth,e.page)};case v:{const n=[...t.records,e.record],{currentPage:r}=t.pagination;return u("appRecords",n),{...t,records:n,...l(n,t.month,r)}}case S:{const e=t.records.filter((e=>e.id!==t.selectedRecord)),{currentPage:n}=t.pagination;return u("appRecords",e),{...t,records:e,...l(e,t.month,n)}}case y:return{...t,showModal:!0};case $:return{...t,showModal:!1};default:return t}}),{month:j,records:N,...l(N,j,1),selectedRecord:null,showModal:!1});new class{constructor(t,e){this.$el=i(e),this.components=t.components||[],this.store=t.store,this.subscriber=new h(this.store)}getRoot(){const t=i.create("div","app"),e={store:this.store};return this.components=this.components.map((n=>{const r=i.create("div",n.className),s=new n(r,e);return r.html(s.toHTML()),t.append(r),s})),t}render(){this.$el.append(this.getRoot()),this.subscriber.subscribeComponents(this.components),this.components.forEach((t=>t.init()))}destroy(){this.subscriber.unSubscribeFromStore(),this.components.forEach((t=>t.destroy()))}}({components:[w,A,O,R],store:D},"#root").render()},217:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});var r=n(15),s=n.n(r),o=n(645),a=n.n(o)()(s());a.push([t.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const i=a},645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=t(e);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var s={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(s[a]=!0)}for(var i=0;i<t.length;i++){var c=[].concat(t[i]);r&&s[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),e.push(c))}},e}},15:t=>{"use strict";function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}t.exports=function(t){var n,r,s=(r=4,function(t){if(Array.isArray(t))return t}(n=t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,s=!1,o=void 0;try{for(var a,i=t[Symbol.iterator]();!(r=(a=i.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){s=!0,o=t}finally{try{r||null==i.return||i.return()}finally{if(s)throw o}}return n}}(n,r)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=s[1],a=s[3];if("function"==typeof btoa){var i=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(i),l="/*# ".concat(c," */"),d=a.sources.map((function(t){return"/*# sourceURL=".concat(a.sourceRoot||"").concat(t," */")}));return[o].concat(d).concat([l]).join("\n")}return[o].join("\n")}},379:(t,e,n)=>{"use strict";var r,s=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),o=[];function a(t){for(var e=-1,n=0;n<o.length;n++)if(o[n].identifier===t){e=n;break}return e}function i(t,e){for(var n={},r=[],s=0;s<t.length;s++){var i=t[s],c=e.base?i[0]+e.base:i[0],l=n[c]||0,d="".concat(c," ").concat(l);n[c]=l+1;var u=a(d),h={css:i[1],media:i[2],sourceMap:i[3]};-1!==u?(o[u].references++,o[u].updater(h)):o.push({identifier:d,updater:m(h,e),references:1}),r.push(d)}return r}function c(t){var e=document.createElement("style"),r=t.attributes||{};if(void 0===r.nonce){var o=n.nc;o&&(r.nonce=o)}if(Object.keys(r).forEach((function(t){e.setAttribute(t,r[t])})),"function"==typeof t.insert)t.insert(e);else{var a=s(t.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(e)}return e}var l,d=(l=[],function(t,e){return l[t]=e,l.filter(Boolean).join("\n")});function u(t,e,n,r){var s=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(t.styleSheet)t.styleSheet.cssText=d(e,s);else{var o=document.createTextNode(s),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}function h(t,e,n){var r=n.css,s=n.media,o=n.sourceMap;if(s?t.setAttribute("media",s):t.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}var p=null,f=0;function m(t,e){var n,r,s;if(e.singleton){var o=f++;n=p||(p=c(e)),r=u.bind(null,n,o,!1),s=u.bind(null,n,o,!0)}else n=c(e),r=h.bind(null,n,e),s=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else s()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=i(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var r=0;r<n.length;r++){var s=a(n[r]);o[s].references--}for(var c=i(t,e),l=0;l<n.length;l++){var d=a(n[l]);0===o[d].references&&(o[d].updater(),o.splice(d,1))}n=c}}}}},0,[[346,666]]]);